<h2 class="underline">{{accordion.getAccordion().name}}</h2>
<div id="{{__SELF__.property('elementId')}}" class="text-left">
    {% for item in accordion.getAccordion().items.take(__SELF__.property('maxItems')) %}
        {% partial "components/accordion-item" title=item.title content=item.body prefix=item.prefix %}
    {% endfor %}
</div>

<script>
    function defer(method) {
        if (window.jQuery) {
            method();
        } else {
            setTimeout(function () { defer(method) }, 50);
        }
    }
    defer(function(){
        $(function () {
            $("#{{__SELF__.property('elementId')}}").accordion({
                collapsible: {{__SELF__.property('collapsible')}},
                active: {{__SELF__.property('collapsible')}},
                icons: {
                    header: "{{__SELF__.property('iconsHeader')}}", //"ui-icon-plus",
                    activeHeader: "{{__SELF__.property('iconsHeaderActive')}}", //"ui-icon-minus",
                },
                heightStyle: "{{__SELF__.property('heightStyle')}}"
            });
        });
    })
</script>